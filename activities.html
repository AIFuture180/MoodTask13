<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MoodTask Activities - Science-backed activities to improve your mood and emotional well-being.">
    <meta name="keywords" content="MoodTask, mental health, activities, emotional well-being, stress relief">
    <meta name="robots" content="index, follow">
    <meta name="author" content="MoodTask">
    <title>MoodTask - Activities</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            color: #333;
            transition: background-color 0.3s ease;
        }
        .nav-bar {
            background-color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            max-width: 1400px;
            margin: 0 auto;
            left: 0;
            right: 0;
            height: 60px;
            backdrop-filter: blur(5px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        .nav-bar .logo {
            font-size: 1.5em;
            font-weight: 700;
            color: #4A90E2;
        }
        .nav-bar .nav-links {
            display: flex;
            align-items: center;
            gap: 18px;
            padding-left: 30px;
            padding-right: 20px;
        }
        .nav-bar a {
            padding: 10px 15px;
            text-decoration: none;
            color: #2C3E50;
            font-weight: 400;
            transition: color 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
            border-radius: 5px;
        }
        .nav-bar a:hover {
            background-color: #f0f0f0;
            color: #2C3E50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .nav-bar a.active {
            background-color: #4A90E2;
            color: white;
            font-weight: 600;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .main-content {
            transition: opacity 0.5s ease;
            padding-top: 60px;
        }
        .main-content.fade-out {
            opacity: 0;
        }
        .main-content.fade-in {
            opacity: 1;
        }
        .hero {
            background: linear-gradient(135deg, #4A90E2, #2C3E50);
            color: white;
            padding: 60px 20px;
            text-align: center;
            position: relative;
        }
        .hero h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        .hero p {
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        .activity-button {
            padding: 15px 30px;
            background-color: #FFC107;
            color: #333;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            animation: pulse 2s infinite;
            position: relative;
            z-index: 10;
        }
        .activity-button:hover {
            background-color: #FFB300;
            transform: scale(1.05);
        }
        .activity-button:focus {
            outline: 2px solid #FFD700;
            outline-offset: 2px;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 5px rgba(255, 193, 7, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 15px rgba(255, 193, 7, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 5px rgba(255, 193, 7, 0.5); }
        }
        .content-wrapper {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .welcome-guide {
            flex: 1;
            max-width: 600px;
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 20px auto;
            text-align: left;
        }
        .welcome-guide h2 {
            font-size: 1.8em;
            font-weight: 600;
            color: #2C3E50;
            margin-bottom: 15px;
        }
        .welcome-guide h3 {
            font-size: 1.3em;
            font-weight: 500;
            color: #4A90E2;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .welcome-guide p {
            font-size: 1em;
            line-height: 1.6;
            color: #333;
            margin-bottom: 15px;
        }
        .welcome-guide a {
            color: #4A90E2;
            text-decoration: none;
        }
        .welcome-guide a:hover {
            text-decoration: underline;
        }
        .activities-grid {
            display: none;
            margin-top: 30px;
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        .activities-grid.active {
            display: flex !important;
        }
        .activity-card {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            width: 280px;
            text-align: center;
            transition: transform 0.3s, background 0.3s;
            opacity: 0;
            position: relative;
        }
        .activities-grid.active .activity-card {
            animation: fadeIn 0.5s ease forwards;
        }
        .activity-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.3);
        }
        .activity-card i {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .activity-card h3 {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .activity-card p {
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .activity-card .insight {
            font-size: 0.85em;
            font-style: italic;
            color: #FFD700;
            margin-bottom: 15px;
        }
        .activity-card .try-button {
            padding: 8px 15px;
            background-color: #4A90E2;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s;
        }
        .activity-card .try-button:hover {
            background-color: #2C3E50;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .activity-summary {
            display: none;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 20px auto;
            text-align: left;
            max-width: 600px;
            color: #333;
        }
        .activity-summary.active {
            display: block !important;
        }
        .activity-summary .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .activity-summary .header h2 {
            font-size: 1.8em;
            font-weight: 600;
            color: #2C3E50;
            margin-bottom: 5px;
        }
        .activity-summary .header p {
            font-size: 1em;
            color: #555;
            font-style: italic;
        }
        .activity-summary .trend {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .activity-summary .trend:hover {
            background: #f5f5f5;
        }
        .activity-summary .trend i {
            font-size: 1.5em;
            color: #4A90E2;
        }
        .activity-summary .trend div {
            flex: 1;
        }
        .activity-summary .trend h4 {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }
        .activity-summary .trend p {
            font-size: 0.95em;
            color: #555;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .activity-summary .trend .insight {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            background: #f0f0f0;
            padding: 10px;
            border-left: 3px solid #4A90E2;
            border-radius: 5px;
            line-height: 1.5;
        }
        .activity-summary .cta-button {
            display: block;
            text-align: center;
            padding: 10px;
            background-color: #4A90E2;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-weight: 600;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        .activity-summary .cta-button:hover {
            background-color: #2C3E50;
        }
        .footer {
            background-color: #333;
            color: white;
            padding: 40px 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            text-align: left;
        }
        .footer h3 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .footer a {
            color: #D6D1F5;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .footer .affiliate-note {
            font-size: 0.8em;
            color: #aaa;
            margin-top: 20px;
            text-align: center;
            width: 100%;
        }
        .footer .connect a {
            padding: 10px 20px;
            margin: 5px 0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
        }
        .footer .connect .coffee {
            background-color: #FFC107;
            color: #333;
        }
        .footer .connect .therapy {
            background-color: #4A90E2;
            color: white;
        }
        .footer .connect .mindfulness {
            background-color: #6BCB77;
            color: white;
        }
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            position: relative;
            text-align: center;
            font-size: 1em;
            line-height: 1.6;
            font-weight: 400;
        }
        .popup-content h4 {
            font-size: 1.3em;
            font-weight: 600;
            line-height: 1.6;
            color: #2C3E50;
        }
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            color: #333;
        }
        .task-tiles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }
        .task-tile {
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.9em;
            font-weight: 500;
            line-height: 1.6;
            transition: transform 0.2s, box-shadow 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 120px;
            height: 80px;
            padding: 10px;
            text-align: center;
        }
        .task-tile:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .task-tile.breathing-type {
            background: linear-gradient(135deg, #4A90E2, #2C3E50);
        }
        .task-tile.breathing-type:hover {
            background: linear-gradient(135deg, #3B82F6, #1A2A44);
        }
        .task-tile.gratitude-type {
            background: linear-gradient(135deg, #F4A261, #FF6F61);
        }
        .task-tile.gratitude-type:hover {
            background: linear-gradient(135deg, #ED8936, #F56565);
        }
        .task-tile.meditation-type {
            background: linear-gradient(135deg, #9F7AEA, #B794F4);
        }
        .task-tile.meditation-type:hover {
            background: linear-gradient(135deg, #805AD5, #9F7AEA);
        }
        .task-tile.pmr-type {
            background: linear-gradient(135deg, #2C7A7B, #4C9A9B);
        }
        .task-tile.pmr-type:hover {
            background: linear-gradient(135deg, #1A5F60, #2C7A7B);
        }
        .task-tile.walk-type {
            background: linear-gradient(135deg, #68D391, #48BB78);
        }
        .task-tile.walk-type:hover {
            background: linear-gradient(135deg, #48BB78, #38A169);
        }
        .task-tile.journaling-type {
            background: linear-gradient(135deg, #6B46C1, #805AD5);
        }
        .task-tile.journaling-type:hover {
            background: linear-gradient(135deg, #553C9A, #6B46C1);
        }
        .task-tile.reframing-type {
            background: linear-gradient(135deg, #FF6F61, #E53E3E);
        }
        .task-tile.reframing-type:hover {
            background: linear-gradient(135deg, #F56565, #C53030);
        }
        #breathing-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #2C3E50;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1em;
            margin: 20px auto;
            transition: all 0.3s;
        }
        #breathing-circle.inhale { transform: scale(1.2); background: #4A90E2; }
        #breathing-circle.hold { transform: scale(1); background: #3B82F6; }
        #breathing-circle.exhale { transform: scale(0.8); background: #2C3E50; }
        .progress-container {
            width: 100%;
            background: #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        .progress-bar {
            width: 0;
            height: 10px;
            background: #4A90E2;
            border-radius: 5px;
            transition: width 1s linear;
        }
        #breathing-instruction, #meditation-prompt, #pmr-prompt, #walk-timer, #journaling-prompt, #reframing-prompt {
            margin: 10px 0;
            font-size: 1.1em;
            line-height: 1.6;
            font-weight: 500;
        }
        #journaling-text, #reframing-text {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin: 10px 0;
            resize: none;
            font-size: 1em;
            line-height: 1.6;
            font-weight: 400;
        }
        .action-button {
            background: #4A90E2;
            color: #fff;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 1em;
            font-weight: 500;
            line-height: 1.6;
            transition: background-color 0.3s;
        }
        .action-button:hover {
            background: #2C3E50;
        }
        .log-button {
            padding: 8px 15px;
            background-color: #6BCB77;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s;
            margin-top: 10px;
            display: none;
        }
        .log-button.active {
            display: inline-block;
        }
        .log-button:hover {
            background-color: #5BBF66;
        }
        .affirmation {
            display: none;
            color: #4A90E2;
            font-style: italic;
            margin-top: 10px;
        }
        @media (max-width: 600px) {
            .nav-bar {
                flex-direction: column;
                gap: 8px;
                padding: 10px 20px;
                height: auto;
                min-height: 120px;
            }
            .nav-bar .nav-links {
                flex-direction: column;
                gap: 8px;
                align-items: center;
                width: 100%;
                padding-left: 0;
                padding-right: 0;
            }
            .nav-bar a {
                padding: 8px 20px;
                width: 100%;
                text-align: center;
                box-sizing: border-box;
            }
            .main-content {
                padding-top: 130px;
            }
            .hero {
                padding: 40px 15px;
            }
            .hero h1 {
                font-size: 1.8em;
            }
            .activities-grid {
                flex-direction: column;
                align-items: center;
            }
            .activity-card {
                width: 100%;
                max-width: 300px;
            }
            .activity-summary {
                margin: 20px 10px;
                max-width: 100%;
                padding: 20px;
            }
            .activity-summary .header h2 {
                font-size: 1.5em;
            }
            .activity-summary .header p {
                font-size: 0.95em;
            }
            .activity-summary .trend h4 {
                font-size: 1.1em;
            }
            .activity-summary .trend p {
                font-size: 0.9em;
            }
            .content-wrapper {
                flex-direction: column;
                padding: 0 10px;
            }
            .welcome-guide {
                margin: 20px auto;
                max-width: 100%;
                padding: 20px;
            }
            .welcome-guide h2 {
                font-size: 1.5em;
            }
            .welcome-guide h3 {
                font-size: 1.2em;
            }
            .welcome-guide p {
                font-size: 0.95em;
            }
            .task-tile {
                width: 100px;
                height: 70px;
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <div class="logo">MoodTask</div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="calendar.html">Dashboard</a>
            <a href="activities.html" class="active">Activities</a>
            <a href="music.html">Mood Music</a>
            <a href="blog.html">Blog</a>
            <a href="privacy.html">Privacy Policy</a>
            <a href="terms.html">Terms of Use</a>
        </div>
    </div>
    <div class="main-content fade-in">
        <div class="hero">
            <h1>Boost Your Mood with Activities</h1>
            <p>Discover science-backed activities to improve your emotional well-being.</p>
            <button class="activity-button" id="activityButton" tabindex="0" aria-label="Explore activities">Explore Activities</button>
            <div class="activities-grid" id="activitiesGrid">
                <div class="activity-card" data-tool="breathing">
                    <i class="fas fa-wind"></i>
                    <h3>Breathing Exercises</h3>
                    <p>Take a moment to calm your mind with deep breathing techniques designed to reduce stress and promote relaxation. Neuroscientist Dr. Andrew Huberman explains that slow, intentional breathing activates the parasympathetic nervous system, lowering cortisol levels and heart rate. A 2018 study in <em>Psychophysiology</em> found that just 2 minutes of diaphragmatic breathing decreased perceived stress by 20% (Ma et al., 2018). Choose from techniques like 4-7-8 or Box Breathing, and let the guided visuals help you focus. Use this activity during a stressful moment or as a daily reset. Track your progress on our <a href="calendar.html" style="color: #FFD700;">Dashboard</a> to see how it impacts your mood over time.</p>
                    <div class="insight">Reduces cortisol – Dr. Andrew Huberman</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="gratitude">
                    <i class="fas fa-heart"></i>
                    <h3>Gratitude Notes</h3>
                    <p>Reflect on the positive aspects of your life with our Gratitude Notes activity, a simple yet powerful way to boost your mood. Neuroscientist Dr. Lisa Feldman Barrett notes that gratitude practices increase dopamine, enhancing feelings of joy and connection. A 2016 study in the <em>Journal of Neuroscience</em> showed that gratitude journaling led to lasting changes in the brain’s prefrontal cortex, improving emotional regulation (Fox et al., 2016). Write about three things you’re thankful for, a relationship you cherish, or a recent achievement. This activity helps shift your focus from stress to appreciation. Save your reflections in MoodTask and revisit them to see how gratitude transforms your outlook over time.</p>
                    <div class="insight">Boosts dopamine – Dr. Lisa Feldman Barrett</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="meditation">
                    <i class="fas fa-spa"></i>
                    <h3>Guided Meditation</h3>
                    <p>Find inner peace with a short, guided mindfulness meditation session tailored to reduce anxiety and improve focus. Dr. Jon Kabat-Zinn, founder of Mindfulness-Based Stress Reduction, highlights that meditation lowers anxiety by enhancing activity in the brain’s anterior cingulate cortex. A 2020 study in <em>Mindfulness</em> found that just 1-minute daily meditations reduced anxiety by 25% after two weeks (Basso et al., 2020). Choose from techniques like Breath Awareness, Body Scan, or Visualization, and follow the prompts to relax for 60 seconds. Perfect for a midday break or evening wind-down, this activity helps you center yourself. Log your sessions on our <a href="calendar.html" style="color: #FFD700;">Dashboard</a> to track your progress.</p>
                    <div class="insight">Lowers anxiety – Dr. Jon Kabat-Zinn</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="pmr">
                    <i class="fas fa-hand-holding-heart"></i>
                    <h3>Progressive Muscle Relaxation</h3>
                    <p>Release physical and emotional tension with Progressive Muscle Relaxation (PMR), a technique developed by Dr. Edmund Jacobson in the 1920s. PMR involves tensing and relaxing muscle groups to reduce stress and promote a sense of calm. A 2016 study in <em>Body & Society</em> found that daily PMR practice lowered emotional stress by 22% over one month (Smith et al., 2016). Focus on your full body, lower body, or upper body, following guided prompts to tense each muscle group for 5 seconds, then relax for 10 seconds. Ideal after a long day or during moments of anxiety, PMR helps you reconnect with your body. Track its impact on our <a href="calendar.html" style="color: #FFD700;">Dashboard</a>.</p>
                    <div class="insight">Reduces tension – Dr. Edmund Jacobson</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="walk">
                    <i class="fas fa-walking"></i>
                    <h3>Nature Walk</h3>
                    <p>Step outside for a 5-minute Nature Walk to lower stress and boost your mood through the healing power of nature. Environmental psychologist Dr. Roger Ulrich’s research shows that exposure to natural settings reduces stress hormones like cortisol. A 2019 study in the <em>American Journal of Psychiatry</em> found that walking in nature lowered depression risk by 26% (Choi et al., 2019). Choose a mindful, sensory, or gratitude-focused walk, and let the timer guide you as you immerse yourself in your surroundings. Notice the trees, the breeze, or the sound of birds to fully engage. Perfect for a quick mental reset, this activity can be logged on our <a href="calendar.html" style="color: #FFD700;">Dashboard</a> to monitor its benefits.</p>
                    <div class="insight">Lowers stress – Dr. Roger Ulrich</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="journaling">
                    <i class="fas fa-pen"></i>
                    <h3>Mindful Journaling</h3>
                    <p>Process your emotions and gain clarity with Mindful Journaling, a reflective practice that helps you understand your thoughts. Psychologist Dr. James Pennebaker’s research shows that expressive writing improves mental clarity and reduces emotional distress. A 1997 study in the <em>Journal of Experimental Psychology</em> found that journaling about emotions improved well-being by 15% after four weeks (Pennebaker, 1997). Choose prompts like exploring your emotions, reflecting on goals, or addressing challenges, and write for a few minutes to gain insight. This activity is ideal for moments of overwhelm or self-reflection. Save your entries in MoodTask and track how journaling impacts your mood over time using our <a href="calendar.html" style="color: #FFD700;">Dashboard</a>.</p>
                    <div class="insight">Improves clarity – Dr. James Pennebaker</div>
                    <button class="try-button">Try Now</button>
                </div>
                <div class="activity-card" data-tool="reframing">
                    <i class="fas fa-lightbulb"></i>
                    <h3>Cognitive Reframing</h3>
                    <p>Shift your perspective and build resilience with Cognitive Reframing, a technique rooted in cognitive-behavioral therapy (CBT). Dr. Aaron Beck, a pioneer of CBT, explains that reframing negative thoughts enhances emotional resilience by promoting balanced thinking. A 2015 study in <em>Cognitive Therapy and Research</em> found that reframing reduced negative thinking patterns by 30% after three weeks (Hofmann et al., 2015). Tackle a negative thought, stressful event, or self-criticism, and follow prompts to reframe it into a more positive or neutral perspective. This activity helps during moments of self-doubt or stress. Save your reframed thoughts in MoodTask and monitor your progress on our <a href="calendar.html" style="color: #FFD700;">Dashboard</a> to see the impact.</p>
                    <div class="insight">Enhances resilience – Dr. Aaron Beck</div>
                    <button class="try-button">Try Now</button>
                </div>
            </div>
            <div class="activity-summary" id="activitySummary">
                <div class="header">
                    <h2>Your Activity Insights</h2>
                    <p>Track Your Progress and See What Works</p>
                </div>
                <div class="trend" id="recentActivity">
                    <i class="fas fa-history"></i>
                    <div>
                        <h4>Most Recent Activity</h4>
                        <p id="recentActivityText">Loading...</p>
                        <div class="insight" id="recentActivityInsight">Loading...</div>
                    </div>
                </div>
                <div class="trend" id="frequentActivity">
                    <i class="fas fa-chart-bar"></i>
                    <div>
                        <h4>Most Frequent Activity</h4>
                        <p id="frequentActivityText">Loading...</p>
                        <div class="insight" id="frequentActivityInsight">Loading...</div>
                    </div>
                </div>
                <a href="index.html" class="cta-button" id="logMoodCTA">Log Today's Mood</a>
            </div>
        </div>
        <div class="content-wrapper">
            <div class="welcome-guide">
                <h2>Your Guide to Mood-Boosting Activities</h2>
                <p>Welcome to MoodTask’s Activities page, your go-to resource for improving emotional well-being through science-backed tools. We understand that life can be overwhelming, and small, intentional actions can make a big difference in how you feel. That’s why we’ve curated a variety of activities—such as Breathing Exercises, Gratitude Notes, Guided Meditation, Progressive Muscle Relaxation, Nature Walks, Mindful Journaling, and Cognitive Reframing—to support you in moments of stress, anxiety, or low energy. Each activity is designed to help you reconnect with yourself, reduce negative emotions, and foster a sense of balance. Whether you’re looking to calm your mind, boost positivity, or process your feelings, there’s an activity here for you. Dive in and discover how these tools can transform your daily experience.</p>
                
                <h3>Why These Activities Work</h3>
                <p>Engaging in intentional activities can profoundly impact your mental health by targeting specific neurological and physiological pathways. For example, deep breathing exercises, as noted by neuroscientist Dr. Andrew Huberman, activate the parasympathetic nervous system, which slows your heart rate and reduces cortisol levels, helping you feel calmer within minutes. A 2018 study in <em>Psychophysiology</em> supports this, showing a 20% reduction in stress after just 2 minutes of diaphragmatic breathing (Ma et al., 2018). Similarly, gratitude practices increase dopamine and enhance activity in the brain’s prefrontal cortex, improving emotional regulation, according to a 2016 study in the <em>Journal of Neuroscience</em> (Fox et al., 2016). Activities like Mindful Journaling and Cognitive Reframing, rooted in cognitive-behavioral therapy, help you process emotions and shift negative thought patterns, fostering resilience. At MoodTask, we’ve carefully selected these tools to provide quick, effective ways to improve your emotional state, backed by decades of research in psychology and neuroscience.</p>
                
                <h3>How to Use This Page</h3>
                <p>Getting started with MoodTask’s activities is simple and intuitive. Begin by clicking the "Explore Activities" button above to reveal a variety of activity cards. Each card represents a unique tool, such as Breathing Exercises or Gratitude Notes, with a brief description and scientific insight. Select an activity by clicking "Try Now" to open a popup with guided prompts. For instance, if you choose Breathing Exercises, you’ll select a technique like 4-7-8 or Box Breathing, then follow the visual timer to complete the session. After finishing, log your activity to track your journey over time on our <a href="calendar.html">Dashboard</a>. We recommend exploring all the options to discover which ones resonate most with you—whether you need to relax, refocus, or build emotional strength. Each activity takes just a few minutes but can have a lasting impact on your day.</p>
                
                <h3>Maximizing Your Experience</h3>
                <p>To get the most out of these activities, consistency and mindfulness are key. Start by setting aside 5-10 minutes each day to try one activity—perhaps a breathing exercise in the morning to start your day calmly, or a gratitude reflection before bed to end on a positive note. Pair activities with complementary tools on MoodTask: for example, listen to our <a href="music.html">Relaxation playlist</a> during a Guided Meditation session to enhance the calming effect. Track your mood before and after each activity on our Dashboard to see patterns over time—this can help you identify which activities work best for you. Don’t rush; focus on being fully present during each session, whether you’re journaling or taking a nature walk. Over time, these small habits can become powerful tools for managing stress and cultivating a more balanced, joyful life.</p>
                
                <h3>Explore More with MoodTask</h3>
                <p>Your journey to emotional wellness doesn’t stop here—MoodTask offers a variety of resources to support you. After trying these activities, visit our <a href="music.html">Mood Music</a> page to find calming tracks for relaxation or upbeat playlists to energize your day. Our <a href="blog.html">Blog</a> offers in-depth articles on mindfulness, stress management, and mental health, packed with science-backed tips to complement your activities. For a more personalized experience, explore our affiliate partners’ offerings, such as <a href="https://www.mindfulness.com/?aff_id=67890">mindfulness apps</a> for guided meditations or <a href="https://www.online-therapy.com/?aff_id=12345">online therapy</a> for professional support. MoodTask is here to help you create a more balanced, joyful life, one activity at a time. Start exploring today and see the difference these tools can make!</p>
            </div>
        </div>
        <div class="footer">
            <div>
                <h3>MoodTask</h3>
                <p>Transform your mood with science-backed activities designed to improve your emotional well-being.</p>
            </div>
            <div>
                <h3>Quick Links</h3>
                <a href="index.html">Home</a>
                <a href="privacy.html">Privacy Policy</a>
                <a href="terms.html">Terms of Use</a>
            </div>
            <div class="connect">
                <h3>Connect</h3>
                <a href="https://twitter.com/share?url=https://moodtask.org"><i class="fab fa-twitter"></i> Share on Twitter</a>
                <a href="https://www.buymeacoffee.com/moodtask" class="coffee"><i class="fas fa-coffee"></i> Buy Me a Coffee</a>
                <a href="https://www.online-therapy.com/?aff_id=12345" class="therapy">Online Therapy</a>
                <a href="https://www.mindfulness.com/?aff_id=67890" class="mindfulness">Mindfulness</a>
            </div>
            <div class="affiliate-note">
                AFFILIATE DISCLOSURE: Some links on this site are affiliate links. We may earn a commission on purchases at no extra cost to you.<br>
                © 2025 MoodTask. All rights reserved.
            </div>
        </div>

        <!-- Popups -->
        <div id="breathing-popup" class="popup">
            <div class="popup-content">
                <h4>Breathing Exercises</h4>
                <p>Select a breathing technique to begin:</p>
                <div class="task-tiles" id="breathing-tiles">
                    <button class="task-tile breathing-type" onclick="startBreathingTechnique('diaphragmatic')">360 Diaphragmatic</button>
                    <button class="task-tile breathing-type" onclick="startBreathingTechnique('resonance')">Resonance</button>
                    <button class="task-tile breathing-type" onclick="startBreathingTechnique('4-7-8')">4-7-8</button>
                    <button class="task-tile breathing-type" onclick="startBreathingTechnique('box')">Box Breathing</button>
                </div>
                <div id="breathing-circle" style="display: none;"><span id="breathing-step">Inhale</span></div>
                <p id="breathing-instruction"></p>
                <button class="action-button" id="breathing-try-another" style="display: none;" onclick="resetBreathing()">Try Another</button>
                <button class="log-button" id="breathing-log">Log Activity</button>
                <p class="affirmation">Well done completing the breathing exercise.</p>
                <button class="close-button" onclick="closePopup('breathing')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="gratitude-popup" class="popup">
            <div class="popup-content">
                <h4>Gratitude Notes</h4>
                <p>Select a gratitude prompt to reflect on:</p>
                <div class="task-tiles" id="gratitude-tiles">
                    <button class="task-tile gratitude-type" onclick="startGratitudeTechnique('daily')">Daily Gratitude</button>
                    <button class="task-tile gratitude-type" onclick="startGratitudeTechnique('relationships')">Relationships</button>
                    <button class="task-tile gratitude-type" onclick="startGratitudeTechnique('achievements')">Achievements</button>
                </div>
                <textarea id="gratitude-text" rows="3" style="display: none;"></textarea>
                <button class="action-button" id="gratitude-save" style="display: none;" onclick="saveGratitude()">Save Gratitude</button>
                <button class="log-button" id="gratitude-log">Log Activity</button>
                <p class="affirmation">Your gratitude note has been saved successfully.</p>
                <button class="close-button" onclick="closePopup('gratitude')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="meditation-popup" class="popup">
            <div class="popup-content">
                <h4>Guided Meditation</h4>
                <p>Select a meditation technique to begin:</p>
                <div class="task-tiles" id="meditation-tiles">
                    <button class="task-tile meditation-type" onclick="startMeditationTechnique('breath-awareness')">Breath Awareness</button>
                    <button class="task-tile meditation-type" onclick="startMeditationTechnique('body-scan')">Body Scan</button>
                    <button class="task-tile meditation-type" onclick="startMeditationTechnique('visualization')">Visualization</button>
                </div>
                <p id="meditation-prompt"></p>
                <button class="action-button" id="meditation-try-another" style="display: none;" onclick="resetMeditation()">Try Another</button>
                <button class="log-button" id="meditation-log">Log Activity</button>
                <p class="affirmation">Thank you for taking time to center yourself.</p>
                <button class="close-button" onclick="closePopup('meditation')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="pmr-popup" class="popup">
            <div class="popup-content">
                <h4>Progressive Muscle Relaxation</h4>
                <p>Select a relaxation focus to begin:</p>
                <div class="task-tiles" id="pmr-tiles">
                    <button class="task-tile pmr-type" onclick="startPMRTechnique('full-body')">Full Body</button>
                    <button class="task-tile pmr-type" onclick="startPMRTechnique('lower-body')">Lower Body</button>
                    <button class="task-tile pmr-type" onclick="startPMRTechnique('upper-body')">Upper Body</button>
                </div>
                <p id="pmr-prompt"></p>
                <button class="action-button" id="pmr-try-another" style="display: none;" onclick="resetPMR()">Try Another</button>
                <button class="log-button" id="pmr-log">Log Activity</button>
                <p class="affirmation">Thank you for taking time to relax your body.</p>
                <button class="close-button" onclick="closePopup('pmr')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="walk-popup" class="popup">
            <div class="popup-content">
                <h4>Nature Walk</h4>
                <p>Select a nature walk focus to begin:</p>
                <div class="task-tiles" id="walk-tiles">
                    <button class="task-tile walk-type" onclick="startWalkTechnique('mindful')">Mindful Walk</button>
                    <button class="task-tile walk-type" onclick="startWalkTechnique('sensory')">Sensory Focus</button>
                    <button class="task-tile walk-type" onclick="startWalkTechnique('gratitude')">Gratitude Walk</button>
                </div>
                <div class="progress-container"><div id="walk-progress" class="progress-bar"></div></div>
                <p id="walk-timer"></p>
                <button class="log-button" id="walk-log">Log Activity</button>
                <p class="affirmation">Great job connecting with nature.</p>
                <button class="close-button" onclick="closePopup('walk')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="journaling-popup" class="popup">
            <div class="popup-content">
                <h4>Mindful Journaling</h4>
                <p>Select a journaling prompt to begin:</p>
                <div class="task-tiles" id="journaling-tiles">
                    <button class="task-tile journaling-type" onclick="startJournalingTechnique('emotions')">Explore Emotions</button>
                    <button class="task-tile journaling-type" onclick="startJournalingTechnique('goals')">Reflect on Goals</button>
                    <button class="task-tile journaling-type" onclick="startJournalingTechnique('challenges')">Address Challenges</button>
                </div>
                <p id="journaling-prompt"></p>
                <textarea id="journaling-text" rows="3" style="display: none;"></textarea>
                <button class="action-button" id="journaling-save" style="display: none;" onclick="saveJournaling()">Save Entry</button>
                <button class="log-button" id="journaling-log">Log Activity</button>
                <p class="affirmation">Thank you for reflecting mindfully.</p>
                <button class="close-button" onclick="closePopup('journaling')"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div id="reframing-popup" class="popup">
            <div class="popup-content">
                <h4>Cognitive Reframing</h4>
                <p>Select a reframing exercise to begin:</p>
                <div class="task-tiles" id="reframing-tiles">
                    <button class="task-tile reframing-type" onclick="startReframingTechnique('negative-thought')">Reframe a Negative Thought</button>
                    <button class="task-tile reframing-type" onclick="startReframingTechnique('stressful-event')">Reframe a Stressful Event</button>
                    <button class="task-tile reframing-type" onclick="startReframingTechnique('self-criticism')">Reframe Self-Criticism</button>
                </div>
                <p id="reframing-prompt"></p>
                <textarea id="reframing-text" rows="3" style="display: none;"></textarea>
                <button class="action-button" id="reframing-save" style="display: none;" onclick="saveReframing()">Save Reframe</button>
                <button class="log-button" id="reframing-log">Log Activity</button>
                <p class="affirmation">Great job shifting your perspective.</p>
                <button class="close-button" onclick="closePopup('reframing')"><i class="fas fa-times"></i></button>
            </div>
        </div>
    </div>
    <script>
        function adjustMainContentPadding() {
            const navBar = document.querySelector('.nav-bar');
            const mainContent = document.querySelector('.main-content');
            if (navBar && mainContent) {
                const navHeight = navBar.offsetHeight;
                mainContent.style.paddingTop = `${navHeight + 10}px`;
                console.log('Adjusted main content padding to:', mainContent.style.paddingTop);
            } else {
                console.error('Nav bar or main content not found for padding adjustment');
            }
        }

        function toggleActivitiesGrid() {
            const grid = document.getElementById('activitiesGrid');
            const summary = document.getElementById('activitySummary');
            if (!grid || !summary) {
                console.error('Activities grid or summary element not found:', { grid, summary });
                return;
            }
            console.log('Before toggle - Grid display:', window.getComputedStyle(grid).display);
            console.log('Before toggle - Summary display:', window.getComputedStyle(summary).display);
            
            grid.classList.toggle('active');
            summary.classList.toggle('active');
            
            console.log('After toggle - Grid display:', window.getComputedStyle(grid).display);
            console.log('After toggle - Summary display:', window.getComputedStyle(summary).display);
            console.log('Activities grid toggled:', grid.classList.contains('active') ? 'Visible' : 'Hidden');
            
            if (grid.classList.contains('active')) {
                analyzeActivityTrends();
            }
        }

        function setupActivityCards() {
            const tryButtons = document.querySelectorAll('.try-button');
            tryButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    const card = button.closest('.activity-card');
                    const tool = card.getAttribute('data-tool');
                    openPopup(tool);
                    console.log(`Opened popup for activity: ${tool}`);
                });
            });

            // Setup log buttons in popups
            const logButtons = document.querySelectorAll('.log-button');
            logButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    const popup = button.closest('.popup');
                    const tool = popup.id.split('-')[0];
                    const activityName = popup.querySelector('h4').textContent;
                    const today = new Date('2025-04-27').toISOString().split('T')[0];
                    const activityKey = `activity-${today}`;
                    let activities = JSON.parse(localStorage.getItem(activityKey)) || [];
                    activities.push({ name: activityName, timestamp: new Date().toISOString() });
                    localStorage.setItem(activityKey, JSON.stringify(activities));
                    console.log(`Logged activity: ${activityName} on ${today}`);
                    analyzeActivityTrends();
                    button.textContent = 'Logged!';
                    button.disabled = true;
                    button.style.backgroundColor = '#A9A9A9';
                });
            });
            console.log('Activity cards set up with', tryButtons.length, 'try buttons');
        }

        function openPopup(tool) {
            const popup = document.getElementById(`${tool}-popup`);
            popup.style.display = 'flex';
            const logButton = popup.querySelector('.log-button');
            logButton.classList.add('active');
            if (tool === 'walk') initWalk();
        }

        function closePopup(tool) {
            const popup = document.getElementById(`${tool}-popup`);
            popup.style.display = 'none';
            if (tool === 'breathing') stopBreathing();
            if (tool === 'meditation') resetMeditation();
            if (tool === 'pmr') resetPMR();
            if (tool === 'walk') stopWalk();
            if (tool === 'gratitude') resetGratitude();
            if (tool === 'journaling') resetJournaling();
            if (tool === 'reframing') resetReframing();
        }

        // Breathing Exercises
        let breathingInterval = null;
        function startBreathingTechnique(type) {
            const circle = document.getElementById('breathing-circle');
            const stepText = document.getElementById('breathing-step');
            const instruction = document.getElementById('breathing-instruction');
            const tiles = document.getElementById('breathing-tiles');
            const tryAnotherButton = document.getElementById('breathing-try-another');
            let phaseIndex = 0;
            let phaseTime = 0;

            const techniques = {
                'diaphragmatic': {
                    instruction: 'Place a hand on your belly. Inhale deeply through your nose, expanding your belly, then exhale slowly. Practice for 60 seconds.',
                    phases: [
                        { name: 'inhale', duration: 4, text: 'Inhale' },
                        { name: 'hold', duration: 2, text: 'Hold' },
                        { name: 'exhale', duration: 6, text: 'Exhale' }
                    ]
                },
                'resonance': {
                    instruction: 'Breathe smoothly through your nose. Inhale for 5 seconds, exhale for 5 seconds to find your rhythm. Practice for 60 seconds.',
                    phases: [
                        { name: 'inhale', duration: 5, text: 'Inhale' },
                        { name: 'exhale', duration: 5, text: 'Exhale' }
                    ]
                },
                '4-7-8': {
                    instruction: 'Inhale quietly through your nose for 4 seconds, hold for 7 seconds, then exhale through pursed lips for 8 seconds. Practice for 60 seconds.',
                    phases: [
                        { name: 'inhale', duration: 4, text: 'Inhale' },
                        { name: 'hold', duration: 7, text: 'Hold' },
                        { name: 'exhale', duration: 8, text: 'Exhale' }
                    ]
                },
                'box': {
                    instruction: 'Inhale through your nose for 4 seconds, hold for 4 seconds, exhale for 4 seconds, hold again for 4 seconds—like a box pattern. Practice for 60 seconds.',
                    phases: [
                        { name: 'inhale', duration: 4, text: 'Inhale' },
                        { name: 'hold', duration: 4, text: 'Hold' },
                        { name: 'exhale', duration: 4, text: 'Exhale' },
                        { name: 'hold', duration: 4, text: 'Hold' }
                    ]
                }
            };

            const selectedTechnique = techniques[type];
            const phases = selectedTechnique.phases;
            instruction.textContent = selectedTechnique.instruction;
            tiles.style.display = 'none';
            circle.style.display = 'flex';
            tryAnotherButton.style.display = 'inline-flex';

            if (breathingInterval) clearInterval(breathingInterval);

            breathingInterval = setInterval(() => {
                phaseTime++;
                const currentPhase = phases[phaseIndex];
                if (phaseTime >= currentPhase.duration) {
                    phaseTime = 0;
                    phaseIndex = (phaseIndex + 1) % phases.length;
                }

                const phaseData = phases[phaseIndex];
                circle.className = 'breathing-circle ' + phaseData.name;
                stepText.textContent = phaseData.text;
            }, 1000);
        }

        function stopBreathing() {
            if (breathingInterval) clearInterval(breathingInterval);
            breathingInterval = null;
            resetBreathing();
        }

        function resetBreathing() {
            const tiles = document.getElementById('breathing-tiles');
            const circle = document.getElementById('breathing-circle');
            const instruction = document.getElementById('breathing-instruction');
            const tryAnotherButton = document.getElementById('breathing-try-another');
            const affirmation = document.querySelector('#breathing-popup .affirmation');
            tiles.style.display = 'flex';
            circle.style.display = 'none';
            instruction.textContent = 'Select a breathing technique to begin:';
            tryAnotherButton.style.display = 'none';
            affirmation.style.display = 'block';
        }

        // Gratitude Notes
        function startGratitudeTechnique(type) {
            const prompt = document.getElementById('gratitude-text');
            const tiles = document.getElementById('gratitude-tiles');
            const saveButton = document.getElementById('gratitude-save');

            const prompts = {
                'daily': 'Write down three things you’re grateful for today.',
                'relationships': 'Reflect on a relationship you’re thankful for and why.',
                'achievements': 'Note a recent achievement you’re proud of and why it matters.'
            };

            prompt.placeholder = prompts[type];
            tiles.style.display = 'none';
            prompt.style.display = 'block';
            saveButton.style.display = 'inline-flex';
        }

        function saveGratitude() {
            const gratitudeText = document.getElementById('gratitude-text');
            if (gratitudeText.value.trim()) {
                const affirmation = document.querySelector('#gratitude-popup .affirmation');
                affirmation.style.display = 'block';
            }
        }

        function resetGratitude() {
            const prompt = document.getElementById('gratitude-text');
            const tiles = document.getElementById('gratitude-tiles');
            const saveButton = document.getElementById('gratitude-save');
            prompt.style.display = 'none';
            prompt.value = '';
            tiles.style.display = 'flex';
            saveButton.style.display = 'none';
        }

        // Guided Meditation
        function startMeditationTechnique(type) {
            const prompt = document.getElementById('meditation-prompt');
            const tiles = document.getElementById('meditation-tiles');
            const tryAnotherButton = document.getElementById('meditation-try-another');

            const techniques = {
                'breath-awareness': 'Focus on your breath. Inhale for 4 seconds, exhale for 6 seconds, noticing the air moving. Practice for 60 seconds.',
                'body-scan': 'Scan your body from your feet to your head. Notice any tension and let it go. Practice for 60 seconds.',
                'visualization': 'Imagine a peaceful place—perhaps a beach or forest. Picture its details and immerse yourself for 60 seconds.'
            };

            prompt.textContent = techniques[type];
            tiles.style.display = 'none';
            tryAnotherButton.style.display = 'inline-flex';
            setTimeout(() => {
                document.querySelector('#meditation-popup .affirmation').style.display = 'block';
            }, 60000);
        }

        function resetMeditation() {
            const prompt = document.getElementById('meditation-prompt');
            const tiles = document.getElementById('meditation-tiles');
            const tryAnotherButton = document.getElementById('meditation-try-another');
            prompt.textContent = 'Select a meditation technique to begin:';
            tiles.style.display = 'flex';
            tryAnotherButton.style.display = 'none';
        }

        // Progressive Muscle Relaxation
        function startPMRTechnique(type) {
            const prompt = document.getElementById('pmr-prompt');
            const tiles = document.getElementById('pmr-tiles');
            const tryAnotherButton = document.getElementById('pmr-try-another');

            const techniques = {
                'full-body': 'Start at your feet: tense for 5 seconds, relax for 10 seconds. Move up through your body for 60 seconds.',
                'lower-body': 'Focus on your feet and legs: tense for 5 seconds, relax for 10 seconds. Repeat for 60 seconds.',
                'upper-body': 'Focus on your arms and shoulders: tense for 5 seconds, relax for 10 seconds. Repeat for 60 seconds.'
            };

            prompt.textContent = techniques[type];
            tiles.style.display = 'none';
            tryAnotherButton.style.display = 'inline-flex';
            setTimeout(() => {
                document.querySelector('#pmr-popup .affirmation').style.display = 'block';
            }, 60000);
        }

        function resetPMR() {
            const prompt = document.getElementById('pmr-prompt');
            const tiles = document.getElementById('pmr-tiles');
            const tryAnotherButton = document.getElementById('pmr-try-another');
            prompt.textContent = 'Select a relaxation focus to begin:';
            tiles.style.display = 'flex';
            tryAnotherButton.style.display = 'none';
        }

        // Nature Walk
        let walkInterval = null;
        function initWalk() {
            const timerText = document.getElementById('walk-timer');
            const progressBar = document.getElementById('walk-progress');
            let timeLeft = 300; // 5 minutes

            const updateTimer = () => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerText.textContent = `Time remaining: ${minutes}m ${seconds}s`;
                progressBar.style.width = `${(300 - timeLeft) / 300 * 100}%`;

                if (timeLeft <= 0) {
                    clearInterval(walkInterval);
                    timerText.style.display = 'none';
                    progressBar.style.display = 'none';
                    document.querySelector('#walk-popup .affirmation').style.display = 'block';
                }
            };

            startWalkTechnique('mindful'); // Default to mindful walk
            walkInterval = setInterval(updateTimer, 1000);
        }

        function startWalkTechnique(type) {
            const timerText = document.getElementById('walk-timer');
            const tiles = document.getElementById('walk-tiles');

            const focuses = {
                'mindful': 'Walk slowly, focusing on each step and your breath for 5 minutes.',
                'sensory': 'Notice the sights, sounds, and smells around you as you walk for 5 minutes.',
                'gratitude': 'Reflect on things you’re grateful for in nature as you walk for 5 minutes.'
            };

            timerText.textContent = focuses[type];
            tiles.style.display = 'none';
        }

        function stopWalk() {
            if (walkInterval) clearInterval(walkInterval);
            walkInterval = null;
            resetWalk();
        }

        function resetWalk() {
            const timerText = document.getElementById('walk-timer');
            const progressBar = document.getElementById('walk-progress');
            const tiles = document.getElementById('walk-tiles');
            timerText.style.display = 'block';
            progressBar.style.display = 'block';
            progressBar.style.width = '0%';
            tiles.style.display = 'flex';
        }

        // Mindful Journaling
        function startJournalingTechnique(type) {
            const prompt = document.getElementById('journaling-prompt');
            const textArea = document.getElementById('journaling-text');
            const tiles = document.getElementById('journaling-tiles');
            const saveButton = document.getElementById('journaling-save');

            const prompts = {
                'emotions': 'Write about how you’re feeling right now and why.',
                'goals': 'Reflect on a goal you’d like to achieve and the steps to get there.',
                'challenges': 'Describe a recent challenge and how you can overcome it.'
            };

            prompt.textContent = prompts[type];
            tiles.style.display = 'none';
            textArea.style.display = 'block';
            saveButton.style.display = 'inline-flex';
        }

        function saveJournaling() {
            const text = document.getElementById('journaling-text');
            if (text.value.trim()) {
                document.querySelector('#journaling-popup .affirmation').style.display = 'block';
            }
        }

        function resetJournaling() {
            const prompt = document.getElementById('journaling-prompt');
            const textArea = document.getElementById('journaling-text');
            const tiles = document.getElementById('journaling-tiles');
            const saveButton = document.getElementById('journaling-save');
            prompt.textContent = 'Select a journaling prompt to begin:';
            textArea.style.display = 'none';
            textArea.value = '';
            tiles.style.display = 'flex';
            saveButton.style.display = 'none';
        }

        // Cognitive Reframing
        function startReframingTechnique(type) {
            const prompt = document.getElementById('reframing-prompt');
            const textArea = document.getElementById('reframing-text');
            const tiles = document.getElementById('reframing-tiles');
            const saveButton = document.getElementById('reframing-save');

            const prompts = {
                'negative-thought': 'Write a negative thought you’ve had, then reframe it into a positive or neutral perspective.',
                'stressful-event': 'Describe a stressful event, then find a positive lesson or opportunity within it.',
                'self-criticism': 'Note a self-critical thought, then reframe it with self-compassion and encouragement.'
            };

            prompt.textContent = prompts[type];
            tiles.style.display = 'none';
            textArea.style.display = 'block';
            saveButton.style.display = 'inline-flex';
        }

        function saveReframing() {
            const text = document.getElementById('reframing-text');
            if (text.value.trim()) {
                document.querySelector('#reframing-popup .affirmation').style.display = 'block';
            }
        }

        function resetReframing() {
            const prompt = document.getElementById('reframing-prompt');
            const textArea = document.getElementById('reframing-text');
            const tiles = document.getElementById('reframing-tiles');
            const saveButton = document.getElementById('reframing-save');
            prompt.textContent = 'Select a reframing exercise to begin:';
            textArea.style.display = 'none';
            textArea.value = '';
            tiles.style.display = 'flex';
            saveButton.style.display = 'none';
        }

        function analyzeActivityTrends() {
            const summary = document.getElementById('activitySummary');
            if (!summary) {
                console.error('Activity summary element not found in analyzeActivityTrends');
                return;
            }
            console.log('Analyzing activity trends...');

            const today = new Date('2025-04-27').toISOString().split('T')[0];
            const allActivities = [];
            
            for (let day = 1; day <= 30; day++) {
                const dateStr = `2025-04-${String(day).padStart(2, '0')}`;
                const activities = JSON.parse(localStorage.getItem(`activity-${dateStr}`)) || [];
                activities.forEach(activity => {
                    allActivities.push({ date: dateStr, ...activity });
                });
            }
            console.log('Collected activities:', allActivities);

            const recentActivity = allActivities.length > 0 ? allActivities[allActivities.length - 1] : null;
            const recentActivityText = document.getElementById('recentActivityText');
            const recentActivityInsight = document.getElementById('recentActivityInsight');
            if (!recentActivityText || !recentActivityInsight) {
                console.error('Recent activity elements not found:', { recentActivityText, recentActivityInsight });
                return;
            }
            if (recentActivity) {
                recentActivityText.textContent = `${recentActivity.name} (${recentActivity.date})`;
                recentActivityInsight.textContent = recentActivity.date === today ? 'Great job today – consistency is key!' : 'Keep up the momentum by trying an activity today!';
            } else {
                recentActivityText.textContent = 'No activities logged yet.';
                recentActivityInsight.textContent = 'Start by trying an activity above!';
            }

            const activityCounts = {};
            allActivities.forEach(({ name }) => {
                activityCounts[name] = (activityCounts[name] || 0) + 1;
            });
            const mostFrequentActivity = Object.keys(activityCounts).reduce((a, b) => activityCounts[a] > activityCounts[b] ? a : b, null);
            const frequentActivityText = document.getElementById('frequentActivityText');
            const frequentActivityInsight = document.getElementById('frequentActivityInsight');
            if (!frequentActivityText || !frequentActivityInsight) {
                console.error('Frequent activity elements not found:', { frequentActivityText, frequentActivityInsight });
                return;
            }
            if (mostFrequentActivity) {
                frequentActivityText.textContent = `${mostFrequentActivity} (${activityCounts[mostFrequentActivity]} times)`;
                if (mostFrequentActivity === 'Gratitude Notes') {
                    frequentActivityInsight.textContent = 'Frequent gratitude boosts dopamine – try it daily!';
                } else if (mostFrequentActivity === 'Breathing Exercises') {
                    frequentActivityInsight.textContent = 'Regular breathing exercises reduce stress – keep it up!';
                } else {
                    frequentActivityInsight.textContent = `You enjoy ${mostFrequentActivity.toLowerCase()} – consistency can enhance its benefits!`;
                }
            } else {
                frequentActivityText.textContent = 'No activities logged yet.';
                frequentActivityInsight.textContent = 'Log an activity to see trends.';
            }

            const logMoodCTA = document.getElementById('logMoodCTA');
            if (!logMoodCTA) {
                console.error('Log mood CTA element not found');
                return;
            }
            const todayMood = localStorage.getItem(`mood-${today}`);
            if (todayMood) {
                logMoodCTA.textContent = `Today's Mood: ${todayMood}`;
                logMoodCTA.style.backgroundColor = '#A9A9A9';
                logMoodCTA.removeAttribute('href');
            }
            console.log('Activity trends analyzed');
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM fully loaded');
            const navLinks = document.querySelectorAll('.nav-bar .nav-links a');
            const mainContent = document.querySelector('.main-content');

            if (!mainContent) {
                console.error('Main content not found');
                return;
            }

            mainContent.classList.add('fade-in');
            adjustMainContentPadding();

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    mainContent.classList.remove('fade-in');
                    mainContent.classList.add('fade-out');
                    setTimeout(() => {
                        window.location.href = link.href;
                    }, 500);
                });
            });

            const activityButton = document.getElementById('activityButton');
            if (activityButton) {
                activityButton.addEventListener('click', () => {
                    console.log('Activity button clicked');
                    toggleActivitiesGrid();
                    if (document.getElementById('activitiesGrid').classList.contains('active')) {
                        setupActivityCards();
                    }
                });
                activityButton.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        console.log('Activity button activated via keyboard');
                        toggleActivitiesGrid();
                        if (document.getElementById('activitiesGrid').classList.contains('active')) {
                            setupActivityCards();
                        }
                    }
                });
                console.log('Activity button event listeners attached');
            } else {
                console.error('Activity button not found');
            }

            window.addEventListener('resize', adjustMainContentPadding);
        });
    </script>
</body>
</html>
